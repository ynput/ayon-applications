<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=hooks/prelaunch_shell_windows.html><link rel=next href=plugins/index.html><link rel=icon href=../../../img/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.9"><title>manager - ayon-applications</title><link rel=stylesheet href=../../../assets/stylesheets/main.4af4bdda.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><script src=https://unpkg.com/iframe-worker/shim></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../css/custom.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#client.ayon_applications.manager class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../index.html title=ayon-applications class="md-header__button md-logo" aria-label=ayon-applications data-md-component=logo> <img src=../../../img/ay-symbol-blackw-full.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ayon-applications </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> manager </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ynput/ayon-applications title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../index.html title=ayon-applications class="md-nav__button md-logo" aria-label=ayon-applications data-md-component=logo> <img src=../../../img/ay-symbol-blackw-full.png alt=logo> </a> ayon-applications </label> <div class=md-nav__source> <a href=https://github.com/ynput/ayon-applications title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../license.html class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> client </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> client </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <div class="md-nav__link md-nav__container"> <a href=index.html class="md-nav__link "> <span class=md-ellipsis> ayon_applications </span> </a> <label class="md-nav__link " for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> ayon_applications </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=action.html class=md-nav__link> <span class=md-ellipsis> action </span> </a> </li> <li class=md-nav__item> <a href=addon.html class=md-nav__link> <span class=md-ellipsis> addon </span> </a> </li> <li class=md-nav__item> <a href=constants.html class=md-nav__link> <span class=md-ellipsis> constants </span> </a> </li> <li class=md-nav__item> <a href=defs.html class=md-nav__link> <span class=md-ellipsis> defs </span> </a> </li> <li class=md-nav__item> <a href=exceptions.html class=md-nav__link> <span class=md-ellipsis> exceptions </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=hooks/prelaunch_shell_windows.html class=md-nav__link> <span class=md-ellipsis> hooks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> manager </span> <span class="md-nav__icon md-icon"></span> </label> <a href=manager.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> manager </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_applications.manager class=md-nav__link> <span class=md-ellipsis> manager </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext class=md-nav__link> <span class=md-ellipsis> ApplicationLaunchContext </span> </a> <nav class=md-nav aria-label=ApplicationLaunchContext> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext.modules_manager class=md-nav__link> <span class=md-ellipsis> modules_manager </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext.clear_launch_args class=md-nav__link> <span class=md-ellipsis> clear_launch_args </span> </a> <nav class=md-nav aria-label=clear_launch_args> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext.clear_launch_args--source class=md-nav__link> <span class=md-ellipsis> source </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext.clear_launch_args--result class=md-nav__link> <span class=md-ellipsis> result </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext.discover_launch_hooks class=md-nav__link> <span class=md-ellipsis> discover_launch_hooks </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext.launch class=md-nav__link> <span class=md-ellipsis> launch </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext.paths_to_launch_hooks class=md-nav__link> <span class=md-ellipsis> paths_to_launch_hooks </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext.run_prelaunch_hooks class=md-nav__link> <span class=md-ellipsis> run_prelaunch_hooks </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationManager class=md-nav__link> <span class=md-ellipsis> ApplicationManager </span> </a> <nav class=md-nav aria-label=ApplicationManager> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationManager.create_launch_context class=md-nav__link> <span class=md-ellipsis> create_launch_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationManager.launch class=md-nav__link> <span class=md-ellipsis> launch </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationManager.launch_with_context class=md-nav__link> <span class=md-ellipsis> launch_with_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationManager.refresh class=md-nav__link> <span class=md-ellipsis> refresh </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationManager.set_studio_settings class=md-nav__link> <span class=md-ellipsis> set_studio_settings </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=plugins/launcher_actions/debug_terminal.html class=md-nav__link> <span class=md-ellipsis> plugins </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=ui/launch_failed_dialog.html class=md-nav__link> <span class=md-ellipsis> ui </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=utils.html class=md-nav__link> <span class=md-ellipsis> utils </span> </a> </li> <li class=md-nav__item> <a href=version.html class=md-nav__link> <span class=md-ellipsis> version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../server/_backwards.html class=md-nav__link> <span class=md-ellipsis> server </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_applications.manager class=md-nav__link> <span class=md-ellipsis> manager </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext class=md-nav__link> <span class=md-ellipsis> ApplicationLaunchContext </span> </a> <nav class=md-nav aria-label=ApplicationLaunchContext> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext.modules_manager class=md-nav__link> <span class=md-ellipsis> modules_manager </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext.clear_launch_args class=md-nav__link> <span class=md-ellipsis> clear_launch_args </span> </a> <nav class=md-nav aria-label=clear_launch_args> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext.clear_launch_args--source class=md-nav__link> <span class=md-ellipsis> source </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext.clear_launch_args--result class=md-nav__link> <span class=md-ellipsis> result </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext.discover_launch_hooks class=md-nav__link> <span class=md-ellipsis> discover_launch_hooks </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext.launch class=md-nav__link> <span class=md-ellipsis> launch </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext.paths_to_launch_hooks class=md-nav__link> <span class=md-ellipsis> paths_to_launch_hooks </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationLaunchContext.run_prelaunch_hooks class=md-nav__link> <span class=md-ellipsis> run_prelaunch_hooks </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationManager class=md-nav__link> <span class=md-ellipsis> ApplicationManager </span> </a> <nav class=md-nav aria-label=ApplicationManager> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationManager.create_launch_context class=md-nav__link> <span class=md-ellipsis> create_launch_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationManager.launch class=md-nav__link> <span class=md-ellipsis> launch </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationManager.launch_with_context class=md-nav__link> <span class=md-ellipsis> launch_with_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationManager.refresh class=md-nav__link> <span class=md-ellipsis> refresh </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_applications.manager.ApplicationManager.set_studio_settings class=md-nav__link> <span class=md-ellipsis> set_studio_settings </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>manager</h1> <div class="doc doc-object doc-module"> <a id=client.ayon_applications.manager></a> <div class="doc doc-contents first"> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=client.ayon_applications.manager.ApplicationLaunchContext class="doc doc-heading"> <code>ApplicationLaunchContext</code> </h2> <div class="doc doc-contents "> <p>Context of launching application.</p> <p>Main purpose of context is to prepare launch arguments and keyword arguments for new process. Most important part of keyword arguments preparations are environment variables.</p> <p>During the whole process is possible to use <code>data</code> attribute to store object usable in multiple places.</p> <p>Launch arguments are strings in list. It is possible to "chain" argument when order of them matters. That is possible to do with adding list where order is right and should not change. NOTE: This is recommendation, not requirement. e.g.: <code>["nuke.exe", "--NukeX"]</code> -&gt; In this case any part of process may insert argument between <code>nuke.exe</code> and <code>--NukeX</code>. To keep them together it is better to wrap them in another list: <code>[["nuke.exe", "--NukeX"]]</code>.</p> <details class=notes open> <summary>Notes</summary> <p>It is possible to use launch context only to prepare environment variables. In that case <code>executable</code> may be None and can be used 'run_prelaunch_hooks' method to run prelaunch hooks which prepare them.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>application</code> </td> <td> <code><a class="autorefs autorefs-internal" title="Application (client.ayon_applications.defs.Application)" href=defs.html#client.ayon_applications.defs.Application>Application</a></code> </td> <td> <div class=doc-md-description> <p>Application definition.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>executable</code> </td> <td> <code><a class="autorefs autorefs-internal" title="ApplicationExecutable (client.ayon_applications.defs.ApplicationExecutable)" href=defs.html#client.ayon_applications.defs.ApplicationExecutable>ApplicationExecutable</a></code> </td> <td> <div class=doc-md-description> <p>Object with path to executable.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>env_group</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Environment variable group. If not set 'DEFAULT_ENV_SUBGROUP' is used.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>launch_type</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Launch type. If not set 'local' is used.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>**data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Any additional data. Data may be used during preparation to store objects usable in multiple places.</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_applications/manager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ApplicationLaunchContext</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Context of launching application.</span>

<span class=sd>    Main purpose of context is to prepare launch arguments and keyword</span>
<span class=sd>    arguments for new process. Most important part of keyword arguments</span>
<span class=sd>    preparations are environment variables.</span>

<span class=sd>    During the whole process is possible to use `data` attribute to store</span>
<span class=sd>    object usable in multiple places.</span>

<span class=sd>    Launch arguments are strings in list. It is possible to &quot;chain&quot; argument</span>
<span class=sd>    when order of them matters. That is possible to do with adding list where</span>
<span class=sd>    order is right and should not change.</span>
<span class=sd>    NOTE: This is recommendation, not requirement.</span>
<span class=sd>    e.g.: `[&quot;nuke.exe&quot;, &quot;--NukeX&quot;]` -&gt; In this case any part of process may</span>
<span class=sd>    insert argument between `nuke.exe` and `--NukeX`. To keep them together</span>
<span class=sd>    it is better to wrap them in another list: `[[&quot;nuke.exe&quot;, &quot;--NukeX&quot;]]`.</span>

<span class=sd>    Notes:</span>
<span class=sd>        It is possible to use launch context only to prepare environment</span>
<span class=sd>            variables. In that case `executable` may be None and can be used</span>
<span class=sd>            &#39;run_prelaunch_hooks&#39; method to run prelaunch hooks which prepare</span>
<span class=sd>            them.</span>

<span class=sd>    Args:</span>
<span class=sd>        application (Application): Application definition.</span>
<span class=sd>        executable (ApplicationExecutable): Object with path to executable.</span>
<span class=sd>        env_group (Optional[str]): Environment variable group. If not set</span>
<span class=sd>            &#39;DEFAULT_ENV_SUBGROUP&#39; is used.</span>
<span class=sd>        launch_type (Optional[str]): Launch type. If not set &#39;local&#39; is used.</span>
<span class=sd>        **data (dict): Any additional data. Data may be used during</span>
<span class=sd>            preparation to store objects usable in multiple places.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>application</span><span class=p>,</span>
        <span class=n>executable</span><span class=p>,</span>
        <span class=n>env_group</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>launch_type</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=o>**</span><span class=n>data</span>
    <span class=p>):</span>
        <span class=c1># Application object</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>application</span> <span class=o>=</span> <span class=n>application</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>addons_manager</span> <span class=o>=</span> <span class=n>AddonsManager</span><span class=p>()</span>

        <span class=c1># Logger</span>
        <span class=n>logger_name</span> <span class=o>=</span> <span class=s2>&quot;</span><span class=si>{}</span><span class=s2>-</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span>
                                     <span class=bp>self</span><span class=o>.</span><span class=n>application</span><span class=o>.</span><span class=n>full_name</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span> <span class=o>=</span> <span class=n>Logger</span><span class=o>.</span><span class=n>get_logger</span><span class=p>(</span><span class=n>logger_name</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>executable</span> <span class=o>=</span> <span class=n>executable</span>

        <span class=k>if</span> <span class=n>launch_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>launch_type</span> <span class=o>=</span> <span class=n>LaunchTypes</span><span class=o>.</span><span class=n>local</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>launch_type</span> <span class=o>=</span> <span class=n>launch_type</span>

        <span class=k>if</span> <span class=n>env_group</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>env_group</span> <span class=o>=</span> <span class=n>DEFAULT_ENV_SUBGROUP</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>env_group</span> <span class=o>=</span> <span class=n>env_group</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>data</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

        <span class=n>launch_args</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>if</span> <span class=n>executable</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>launch_args</span> <span class=o>=</span> <span class=n>executable</span><span class=o>.</span><span class=n>as_args</span><span class=p>()</span>
        <span class=c1># subprocess.Popen launch arguments (first argument in constructor)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>launch_args</span> <span class=o>=</span> <span class=n>launch_args</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>launch_args</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>application</span><span class=o>.</span><span class=n>arguments</span><span class=p>)</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;app_args&quot;</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>launch_args</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;app_args&quot;</span><span class=p>))</span>

        <span class=c1># Handle launch environemtns</span>
        <span class=n>src_env</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;env&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>src_env</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>src_env</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>((</span>
                <span class=s2>&quot;Passed `env` kwarg has invalid type: </span><span class=si>{}</span><span class=s2>. Expected: `dict`.&quot;</span>
                <span class=s2>&quot; Using `os.environ` instead.&quot;</span>
            <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>src_env</span><span class=p>))))</span>
            <span class=n>src_env</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=k>if</span> <span class=n>src_env</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>src_env</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span>

        <span class=n>ignored_env</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;QT_API&quot;</span><span class=p>,</span> <span class=p>}</span>
        <span class=n>env</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
            <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>src_env</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>ignored_env</span>
        <span class=p>}</span>
        <span class=c1># subprocess.Popen keyword arguments</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;env&quot;</span><span class=p>:</span> <span class=n>env</span><span class=p>}</span>

        <span class=k>if</span> <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=o>==</span> <span class=s2>&quot;windows&quot;</span><span class=p>:</span>
            <span class=c1># Detach new process from currently running process on Windows</span>
            <span class=n>flags</span> <span class=o>=</span> <span class=p>(</span>
                <span class=n>subprocess</span><span class=o>.</span><span class=n>CREATE_NEW_PROCESS_GROUP</span>
                <span class=o>|</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>DETACHED_PROCESS</span>
            <span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;creationflags&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>flags</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>sys</span><span class=o>.</span><span class=n>stdout</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;stdout&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>DEVNULL</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;stderr&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>DEVNULL</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>prelaunch_hooks</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>postlaunch_hooks</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>process</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_prelaunch_hooks_executed</span> <span class=o>=</span> <span class=kc>False</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>env</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=s2>&quot;env&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span>
            <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;env&quot;</span><span class=p>]</span> <span class=ow>is</span> <span class=kc>None</span>
        <span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;env&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;env&quot;</span><span class=p>]</span>

    <span class=nd>@env</span><span class=o>.</span><span class=n>setter</span>
    <span class=k>def</span><span class=w> </span><span class=nf>env</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                <span class=s2>&quot;&#39;env&#39; attribute expect &#39;dict&#39; object. Got: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=nb>str</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>value</span><span class=p>))</span>
                <span class=p>)</span>
            <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;env&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>modules_manager</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Deprecated:</span>
<span class=sd>            Use &#39;addons_manager&#39; instead.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>addons_manager</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_collect_addons_launch_hook_paths</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Helper to collect application launch hooks from addons.</span>

<span class=sd>        Module have to have implemented &#39;get_launch_hook_paths&#39; method which</span>
<span class=sd>        can expect application as argument or nothing.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[str]: Paths to launch hook directories.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>expected_types</span> <span class=o>=</span> <span class=p>(</span><span class=nb>list</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>,</span> <span class=nb>set</span><span class=p>)</span>

        <span class=n>output</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>module</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>addons_manager</span><span class=o>.</span><span class=n>get_enabled_addons</span><span class=p>():</span>
            <span class=c1># Skip module if does not have implemented &#39;get_launch_hook_paths&#39;</span>
            <span class=n>func</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>module</span><span class=p>,</span> <span class=s2>&quot;get_launch_hook_paths&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>func</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=n>func</span> <span class=o>=</span> <span class=n>module</span><span class=o>.</span><span class=n>get_launch_hook_paths</span>
            <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>inspect</span><span class=p>,</span> <span class=s2>&quot;signature&quot;</span><span class=p>):</span>
                <span class=n>sig</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>signature</span><span class=p>(</span><span class=n>func</span><span class=p>)</span>
                <span class=n>expect_args</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>sig</span><span class=o>.</span><span class=n>parameters</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>expect_args</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>inspect</span><span class=o>.</span><span class=n>getargspec</span><span class=p>(</span><span class=n>func</span><span class=p>)[</span><span class=mi>0</span><span class=p>])</span> <span class=o>&gt;</span> <span class=mi>0</span>

            <span class=c1># Pass application argument if method expect it.</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>expect_args</span><span class=p>:</span>
                    <span class=n>hook_paths</span> <span class=o>=</span> <span class=n>func</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>application</span><span class=p>)</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=n>hook_paths</span> <span class=o>=</span> <span class=n>func</span><span class=p>()</span>
            <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                    <span class=s2>&quot;Failed to call &#39;get_launch_hook_paths&#39;&quot;</span><span class=p>,</span>
                    <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
                <span class=p>)</span>
                <span class=k>continue</span>

            <span class=k>if</span> <span class=ow>not</span> <span class=n>hook_paths</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=c1># Convert string to list</span>
            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>hook_paths</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
                <span class=n>hook_paths</span> <span class=o>=</span> <span class=p>[</span><span class=n>hook_paths</span><span class=p>]</span>

            <span class=c1># Skip invalid types</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>hook_paths</span><span class=p>,</span> <span class=n>expected_types</span><span class=p>):</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>((</span>
                    <span class=s2>&quot;Result of `get_launch_hook_paths`&quot;</span>
                    <span class=s2>&quot; has invalid type </span><span class=si>{}</span><span class=s2>. Expected </span><span class=si>{}</span><span class=s2>&quot;</span>
                <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>hook_paths</span><span class=p>),</span> <span class=n>expected_types</span><span class=p>))</span>
                <span class=k>continue</span>

            <span class=n>output</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>hook_paths</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>paths_to_launch_hooks</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Directory paths where to look for launch hooks.&quot;&quot;&quot;</span>
        <span class=c1># This method has potential to be part of application manager (maybe).</span>
        <span class=n>paths</span> <span class=o>=</span> <span class=p>[]</span>

        <span class=c1># TODO load additional studio paths from settings</span>
        <span class=n>global_hooks_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>AYON_CORE_ROOT</span><span class=p>,</span> <span class=s2>&quot;hooks&quot;</span><span class=p>)</span>

        <span class=n>hooks_dirs</span> <span class=o>=</span> <span class=p>[</span>
            <span class=n>global_hooks_dir</span>
        <span class=p>]</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>host_name</span><span class=p>:</span>
            <span class=c1># If host requires launch hooks and is module then launch hooks</span>
            <span class=c1>#   should be collected using &#39;collect_launch_hook_paths&#39;</span>
            <span class=c1>#   - module have to implement &#39;get_launch_hook_paths&#39;</span>
            <span class=n>host_module</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>addons_manager</span><span class=o>.</span><span class=n>get_host_addon</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>host_name</span><span class=p>)</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>host_module</span><span class=p>:</span>
                <span class=n>hooks_dirs</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
                    <span class=n>AYON_CORE_ROOT</span><span class=p>,</span> <span class=s2>&quot;hosts&quot;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>host_name</span><span class=p>,</span> <span class=s2>&quot;hooks&quot;</span>
                <span class=p>))</span>

        <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>hooks_dirs</span><span class=p>:</span>
            <span class=k>if</span> <span class=p>(</span>
                <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
                <span class=ow>and</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isdir</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
                <span class=ow>and</span> <span class=n>path</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>paths</span>
            <span class=p>):</span>
                <span class=n>paths</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

        <span class=c1># Load modules paths</span>
        <span class=n>paths</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_collect_addons_launch_hook_paths</span><span class=p>())</span>

        <span class=k>return</span> <span class=n>paths</span>

    <span class=k>def</span><span class=w> </span><span class=nf>discover_launch_hooks</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>force</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Load and prepare launch hooks.&quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>prelaunch_hooks</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
            <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>postlaunch_hooks</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
        <span class=p>):</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>force</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Launch hooks were already discovered.&quot;</span><span class=p>)</span>
                <span class=k>return</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>prelaunch_hooks</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>postlaunch_hooks</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Discovery of launch hooks started.&quot;</span><span class=p>)</span>

        <span class=n>paths</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>paths_to_launch_hooks</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Paths searched for launch hooks:</span><span class=se>\n</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=s2>&quot;- </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>path</span><span class=p>)</span> <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>paths</span><span class=p>)</span>
        <span class=p>))</span>

        <span class=n>all_classes</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;pre&quot;</span><span class=p>:</span> <span class=p>[],</span>
            <span class=s2>&quot;post&quot;</span><span class=p>:</span> <span class=p>[]</span>
        <span class=p>}</span>
        <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>paths</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span>
                    <span class=s2>&quot;Path to launch hooks does not exist: </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
                <span class=p>)</span>
                <span class=k>continue</span>

            <span class=n>modules</span><span class=p>,</span> <span class=n>_crashed</span> <span class=o>=</span> <span class=n>modules_from_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
            <span class=k>for</span> <span class=n>_filepath</span><span class=p>,</span> <span class=n>module</span> <span class=ow>in</span> <span class=n>modules</span><span class=p>:</span>
                <span class=n>all_classes</span><span class=p>[</span><span class=s2>&quot;pre&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span>
                    <span class=n>classes_from_module</span><span class=p>(</span><span class=n>PreLaunchHook</span><span class=p>,</span> <span class=n>module</span><span class=p>)</span>
                <span class=p>)</span>
                <span class=n>all_classes</span><span class=p>[</span><span class=s2>&quot;post&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span>
                    <span class=n>classes_from_module</span><span class=p>(</span><span class=n>PostLaunchHook</span><span class=p>,</span> <span class=n>module</span><span class=p>)</span>
                <span class=p>)</span>

        <span class=k>for</span> <span class=n>launch_type</span><span class=p>,</span> <span class=n>classes</span> <span class=ow>in</span> <span class=n>all_classes</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>hooks_with_order</span> <span class=o>=</span> <span class=p>[]</span>
            <span class=n>hooks_without_order</span> <span class=o>=</span> <span class=p>[]</span>
            <span class=k>for</span> <span class=n>klass</span> <span class=ow>in</span> <span class=n>classes</span><span class=p>:</span>
                <span class=k>try</span><span class=p>:</span>
                    <span class=n>hook</span> <span class=o>=</span> <span class=n>klass</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
                    <span class=k>if</span> <span class=ow>not</span> <span class=n>hook</span><span class=o>.</span><span class=n>is_valid</span><span class=p>:</span>
                        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
                            <span class=s2>&quot;Skipped hook invalid for current launch context: &quot;</span>
                            <span class=s2>&quot;</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>klass</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
                        <span class=p>)</span>
                        <span class=k>continue</span>

                    <span class=k>if</span> <span class=n>inspect</span><span class=o>.</span><span class=n>isabstract</span><span class=p>(</span><span class=n>hook</span><span class=p>):</span>
                        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Skipped abstract hook: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                            <span class=n>klass</span><span class=o>.</span><span class=vm>__name__</span>
                        <span class=p>))</span>
                        <span class=k>continue</span>

                    <span class=c1># Separate hooks by pre/post class</span>
                    <span class=k>if</span> <span class=n>hook</span><span class=o>.</span><span class=n>order</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                        <span class=n>hooks_without_order</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>hook</span><span class=p>)</span>
                    <span class=k>else</span><span class=p>:</span>
                        <span class=n>hooks_with_order</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>hook</span><span class=p>)</span>

                <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                        <span class=s2>&quot;Initialization of hook failed: &quot;</span>
                        <span class=s2>&quot;</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>klass</span><span class=o>.</span><span class=vm>__name__</span><span class=p>),</span>
                        <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
                    <span class=p>)</span>

            <span class=c1># Sort hooks with order by order</span>
            <span class=n>ordered_hooks</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>sorted</span><span class=p>(</span>
                <span class=n>hooks_with_order</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>obj</span><span class=p>:</span> <span class=n>obj</span><span class=o>.</span><span class=n>order</span>
            <span class=p>))</span>
            <span class=c1># Extend ordered hooks with hooks without defined order</span>
            <span class=n>ordered_hooks</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>hooks_without_order</span><span class=p>)</span>

            <span class=k>if</span> <span class=n>launch_type</span> <span class=o>==</span> <span class=s2>&quot;pre&quot;</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>prelaunch_hooks</span> <span class=o>=</span> <span class=n>ordered_hooks</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>postlaunch_hooks</span> <span class=o>=</span> <span class=n>ordered_hooks</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Found </span><span class=si>{}</span><span class=s2> prelaunch and </span><span class=si>{}</span><span class=s2> postlaunch hooks.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>prelaunch_hooks</span><span class=p>),</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>postlaunch_hooks</span><span class=p>)</span>
        <span class=p>))</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>app_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>application</span><span class=o>.</span><span class=n>name</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>host_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>application</span><span class=o>.</span><span class=n>host_name</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>app_group</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>application</span><span class=o>.</span><span class=n>group</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>manager</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>application</span><span class=o>.</span><span class=n>manager</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_run_process</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=c1># Windows and MacOS have easier process start</span>
        <span class=n>low_platform</span> <span class=o>=</span> <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>low_platform</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;windows&quot;</span><span class=p>,</span> <span class=s2>&quot;darwin&quot;</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>Popen</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>launch_args</span><span class=p>,</span> <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=p>)</span>

        <span class=c1># Linux uses mid process</span>
        <span class=c1># - it is possible that the mid process executable is not</span>
        <span class=c1>#   available for this version of AYON in that case use standard</span>
        <span class=c1>#   launch</span>
        <span class=n>launch_args</span> <span class=o>=</span> <span class=n>get_linux_launcher_args</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>launch_args</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>Popen</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>launch_args</span><span class=p>,</span> <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=p>)</span>

        <span class=c1># Prepare data that will be passed to midprocess</span>
        <span class=c1># - store arguments to a json and pass path to json as last argument</span>
        <span class=c1># - pass environments to set</span>
        <span class=n>app_env</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;env&quot;</span><span class=p>,</span> <span class=p>{})</span>
        <span class=n>json_data</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;args&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>launch_args</span><span class=p>,</span>
            <span class=s2>&quot;env&quot;</span><span class=p>:</span> <span class=n>app_env</span>
        <span class=p>}</span>
        <span class=k>if</span> <span class=n>app_env</span><span class=p>:</span>
            <span class=c1># Filter environments of subprocess</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;env&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
                <span class=n>key</span><span class=p>:</span> <span class=n>value</span>
                <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
                <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>app_env</span>
            <span class=p>}</span>

        <span class=c1># Create temp file</span>
        <span class=n>json_temp</span> <span class=o>=</span> <span class=n>tempfile</span><span class=o>.</span><span class=n>NamedTemporaryFile</span><span class=p>(</span>
            <span class=n>mode</span><span class=o>=</span><span class=s2>&quot;w&quot;</span><span class=p>,</span> <span class=n>prefix</span><span class=o>=</span><span class=s2>&quot;op_app_args&quot;</span><span class=p>,</span> <span class=n>suffix</span><span class=o>=</span><span class=s2>&quot;.json&quot;</span><span class=p>,</span> <span class=n>delete</span><span class=o>=</span><span class=kc>False</span>
        <span class=p>)</span>
        <span class=n>json_temp</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
        <span class=n>json_temp_filpath</span> <span class=o>=</span> <span class=n>json_temp</span><span class=o>.</span><span class=n>name</span>
        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>json_temp_filpath</span><span class=p>,</span> <span class=s2>&quot;w&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>stream</span><span class=p>:</span>
            <span class=n>json</span><span class=o>.</span><span class=n>dump</span><span class=p>(</span><span class=n>json_data</span><span class=p>,</span> <span class=n>stream</span><span class=p>)</span>

        <span class=n>launch_args</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>json_temp_filpath</span><span class=p>)</span>

        <span class=c1># Create mid-process which will launch application</span>
        <span class=n>process</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>Popen</span><span class=p>(</span><span class=n>launch_args</span><span class=p>,</span> <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=c1># Wait until the process finishes</span>
        <span class=c1>#   - This is important! The process would stay in &quot;open&quot; state.</span>
        <span class=n>process</span><span class=o>.</span><span class=n>wait</span><span class=p>()</span>
        <span class=c1># Remove the temp file</span>
        <span class=n>os</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>json_temp_filpath</span><span class=p>)</span>
        <span class=c1># Return process which is already terminated</span>
        <span class=k>return</span> <span class=n>process</span>

    <span class=k>def</span><span class=w> </span><span class=nf>run_prelaunch_hooks</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Run prelaunch hooks.</span>

<span class=sd>        This method will be executed only once, any future calls will skip</span>
<span class=sd>            the processing.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_prelaunch_hooks_executed</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Prelaunch hooks were already executed.&quot;</span><span class=p>)</span>
            <span class=k>return</span>
        <span class=c1># Discover launch hooks</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>discover_launch_hooks</span><span class=p>()</span>

        <span class=c1># Execute prelaunch hooks</span>
        <span class=k>for</span> <span class=n>prelaunch_hook</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>prelaunch_hooks</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Executing prelaunch hook: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=nb>str</span><span class=p>(</span><span class=n>prelaunch_hook</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
            <span class=p>))</span>
            <span class=n>prelaunch_hook</span><span class=o>.</span><span class=n>execute</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_prelaunch_hooks_executed</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>launch</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Collect data for new process and then create it.</span>

<span class=sd>        This method must not be executed more than once.</span>

<span class=sd>        Returns:</span>
<span class=sd>            subprocess.Popen: Created process as Popen object.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>process</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Application was already launched.&quot;</span><span class=p>)</span>
            <span class=k>return</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_prelaunch_hooks_executed</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>run_prelaunch_hooks</span><span class=p>()</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;All prelaunch hook executed. Starting new process.&quot;</span><span class=p>)</span>

        <span class=c1># Prepare subprocess args</span>
        <span class=n>args_len_str</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>launch_args</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
            <span class=n>args</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>launch_args</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>args</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>clear_launch_args</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>launch_args</span><span class=p>)</span>
            <span class=n>args_len_str</span> <span class=o>=</span> <span class=s2>&quot; (</span><span class=si>{}</span><span class=s2>)&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>args</span><span class=p>))</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span>
            <span class=s2>&quot;Launching </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2> with args</span><span class=si>{}</span><span class=s2>: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>application</span><span class=o>.</span><span class=n>full_name</span><span class=p>,</span> <span class=n>args_len_str</span><span class=p>,</span> <span class=n>args</span>
            <span class=p>)</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>launch_args</span> <span class=o>=</span> <span class=n>args</span>

        <span class=c1># Run process</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>process</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_run_process</span><span class=p>()</span>

        <span class=c1># Process post launch hooks</span>
        <span class=k>for</span> <span class=n>postlaunch_hook</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>postlaunch_hooks</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Executing postlaunch hook: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=nb>str</span><span class=p>(</span><span class=n>postlaunch_hook</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
            <span class=p>))</span>

            <span class=c1># TODO how to handle errors?</span>
            <span class=c1># - store to variable to let them accessible?</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>postlaunch_hook</span><span class=o>.</span><span class=n>execute</span><span class=p>()</span>

            <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                    <span class=s2>&quot;After launch procedures were not successful.&quot;</span><span class=p>,</span>
                    <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
                <span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Launch of </span><span class=si>{}</span><span class=s2> finished.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>application</span><span class=o>.</span><span class=n>full_name</span>
        <span class=p>))</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>process</span>

    <span class=nd>@staticmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>clear_launch_args</span><span class=p>(</span><span class=n>args</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Collect launch arguments to final order.</span>

<span class=sd>        Launch argument should be list that may contain another lists this</span>
<span class=sd>        function will upack inner lists and keep ordering.</span>

<span class=sd>        ```</span>
<span class=sd>        # source</span>
<span class=sd>        [ [ arg1, [ arg2, arg3 ] ], arg4, [arg5, arg6]]</span>
<span class=sd>        # result</span>
<span class=sd>        [ arg1, arg2, arg3, arg4, arg5, arg6]</span>

<span class=sd>        Args:</span>
<span class=sd>            args (list): Source arguments in list may contain inner lists.</span>

<span class=sd>        Return:</span>
<span class=sd>            list: Unpacked arguments.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>args</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>args</span>
        <span class=n>all_cleared</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=k>while</span> <span class=ow>not</span> <span class=n>all_cleared</span><span class=p>:</span>
            <span class=n>all_cleared</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=n>new_args</span> <span class=o>=</span> <span class=p>[]</span>
            <span class=k>for</span> <span class=n>arg</span> <span class=ow>in</span> <span class=n>args</span><span class=p>:</span>
                <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>arg</span><span class=p>,</span> <span class=p>(</span><span class=nb>list</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>,</span> <span class=nb>set</span><span class=p>)):</span>
                    <span class=n>all_cleared</span> <span class=o>=</span> <span class=kc>False</span>
                    <span class=k>for</span> <span class=n>_arg</span> <span class=ow>in</span> <span class=n>arg</span><span class=p>:</span>
                        <span class=n>new_args</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>_arg</span><span class=p>)</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=n>new_args</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>arg</span><span class=p>)</span>
            <span class=n>args</span> <span class=o>=</span> <span class=n>new_args</span>

        <span class=k>return</span> <span class=n>args</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_applications.manager.ApplicationLaunchContext.modules_manager class="doc doc-heading"> <code class="highlight language-python"><span class=n>modules_manager</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <details class=deprecated open> <summary>Deprecated</summary> <p>Use 'addons_manager' instead.</p> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_applications.manager.ApplicationLaunchContext.clear_launch_args class="doc doc-heading"> <code class="highlight language-python"><span class=n>clear_launch_args</span><span class=p>(</span><span class=n>args</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Collect launch arguments to final order.</p> <p>Launch argument should be list that may contain another lists this function will upack inner lists and keep ordering.</p> <p>```</p> <h4 id=client.ayon_applications.manager.ApplicationLaunchContext.clear_launch_args--source>source</h4> <p>[ [ arg1, [ arg2, arg3 ] ], arg4, [arg5, arg6]]</p> <h4 id=client.ayon_applications.manager.ApplicationLaunchContext.clear_launch_args--result>result</h4> <p>[ arg1, arg2, arg3, arg4, arg5, arg6]</p> <p>Args: args (list): Source arguments in list may contain inner lists.</p> <p>Return: list: Unpacked arguments.</p> <details class=quote> <summary>Source code in <code>client/ayon_applications/manager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@staticmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>clear_launch_args</span><span class=p>(</span><span class=n>args</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Collect launch arguments to final order.</span>

<span class=sd>    Launch argument should be list that may contain another lists this</span>
<span class=sd>    function will upack inner lists and keep ordering.</span>

<span class=sd>    ```</span>
<span class=sd>    # source</span>
<span class=sd>    [ [ arg1, [ arg2, arg3 ] ], arg4, [arg5, arg6]]</span>
<span class=sd>    # result</span>
<span class=sd>    [ arg1, arg2, arg3, arg4, arg5, arg6]</span>

<span class=sd>    Args:</span>
<span class=sd>        args (list): Source arguments in list may contain inner lists.</span>

<span class=sd>    Return:</span>
<span class=sd>        list: Unpacked arguments.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>args</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>args</span>
    <span class=n>all_cleared</span> <span class=o>=</span> <span class=kc>False</span>
    <span class=k>while</span> <span class=ow>not</span> <span class=n>all_cleared</span><span class=p>:</span>
        <span class=n>all_cleared</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=n>new_args</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>arg</span> <span class=ow>in</span> <span class=n>args</span><span class=p>:</span>
            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>arg</span><span class=p>,</span> <span class=p>(</span><span class=nb>list</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>,</span> <span class=nb>set</span><span class=p>)):</span>
                <span class=n>all_cleared</span> <span class=o>=</span> <span class=kc>False</span>
                <span class=k>for</span> <span class=n>_arg</span> <span class=ow>in</span> <span class=n>arg</span><span class=p>:</span>
                    <span class=n>new_args</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>_arg</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>new_args</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>arg</span><span class=p>)</span>
        <span class=n>args</span> <span class=o>=</span> <span class=n>new_args</span>

    <span class=k>return</span> <span class=n>args</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_applications.manager.ApplicationLaunchContext.discover_launch_hooks class="doc doc-heading"> <code class="highlight language-python"><span class=n>discover_launch_hooks</span><span class=p>(</span><span class=n>force</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Load and prepare launch hooks.</p> <details class=quote> <summary>Source code in <code>client/ayon_applications/manager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>discover_launch_hooks</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>force</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Load and prepare launch hooks.&quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>prelaunch_hooks</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
        <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>postlaunch_hooks</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
    <span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>force</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Launch hooks were already discovered.&quot;</span><span class=p>)</span>
            <span class=k>return</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>prelaunch_hooks</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>postlaunch_hooks</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Discovery of launch hooks started.&quot;</span><span class=p>)</span>

    <span class=n>paths</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>paths_to_launch_hooks</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Paths searched for launch hooks:</span><span class=se>\n</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
        <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=s2>&quot;- </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>path</span><span class=p>)</span> <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>paths</span><span class=p>)</span>
    <span class=p>))</span>

    <span class=n>all_classes</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;pre&quot;</span><span class=p>:</span> <span class=p>[],</span>
        <span class=s2>&quot;post&quot;</span><span class=p>:</span> <span class=p>[]</span>
    <span class=p>}</span>
    <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>paths</span><span class=p>:</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span>
                <span class=s2>&quot;Path to launch hooks does not exist: </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
            <span class=p>)</span>
            <span class=k>continue</span>

        <span class=n>modules</span><span class=p>,</span> <span class=n>_crashed</span> <span class=o>=</span> <span class=n>modules_from_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>_filepath</span><span class=p>,</span> <span class=n>module</span> <span class=ow>in</span> <span class=n>modules</span><span class=p>:</span>
            <span class=n>all_classes</span><span class=p>[</span><span class=s2>&quot;pre&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span>
                <span class=n>classes_from_module</span><span class=p>(</span><span class=n>PreLaunchHook</span><span class=p>,</span> <span class=n>module</span><span class=p>)</span>
            <span class=p>)</span>
            <span class=n>all_classes</span><span class=p>[</span><span class=s2>&quot;post&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span>
                <span class=n>classes_from_module</span><span class=p>(</span><span class=n>PostLaunchHook</span><span class=p>,</span> <span class=n>module</span><span class=p>)</span>
            <span class=p>)</span>

    <span class=k>for</span> <span class=n>launch_type</span><span class=p>,</span> <span class=n>classes</span> <span class=ow>in</span> <span class=n>all_classes</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=n>hooks_with_order</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>hooks_without_order</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>klass</span> <span class=ow>in</span> <span class=n>classes</span><span class=p>:</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>hook</span> <span class=o>=</span> <span class=n>klass</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
                <span class=k>if</span> <span class=ow>not</span> <span class=n>hook</span><span class=o>.</span><span class=n>is_valid</span><span class=p>:</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
                        <span class=s2>&quot;Skipped hook invalid for current launch context: &quot;</span>
                        <span class=s2>&quot;</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>klass</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
                    <span class=p>)</span>
                    <span class=k>continue</span>

                <span class=k>if</span> <span class=n>inspect</span><span class=o>.</span><span class=n>isabstract</span><span class=p>(</span><span class=n>hook</span><span class=p>):</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Skipped abstract hook: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                        <span class=n>klass</span><span class=o>.</span><span class=vm>__name__</span>
                    <span class=p>))</span>
                    <span class=k>continue</span>

                <span class=c1># Separate hooks by pre/post class</span>
                <span class=k>if</span> <span class=n>hook</span><span class=o>.</span><span class=n>order</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                    <span class=n>hooks_without_order</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>hook</span><span class=p>)</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=n>hooks_with_order</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>hook</span><span class=p>)</span>

            <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                    <span class=s2>&quot;Initialization of hook failed: &quot;</span>
                    <span class=s2>&quot;</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>klass</span><span class=o>.</span><span class=vm>__name__</span><span class=p>),</span>
                    <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
                <span class=p>)</span>

        <span class=c1># Sort hooks with order by order</span>
        <span class=n>ordered_hooks</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>sorted</span><span class=p>(</span>
            <span class=n>hooks_with_order</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>obj</span><span class=p>:</span> <span class=n>obj</span><span class=o>.</span><span class=n>order</span>
        <span class=p>))</span>
        <span class=c1># Extend ordered hooks with hooks without defined order</span>
        <span class=n>ordered_hooks</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>hooks_without_order</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>launch_type</span> <span class=o>==</span> <span class=s2>&quot;pre&quot;</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>prelaunch_hooks</span> <span class=o>=</span> <span class=n>ordered_hooks</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>postlaunch_hooks</span> <span class=o>=</span> <span class=n>ordered_hooks</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Found </span><span class=si>{}</span><span class=s2> prelaunch and </span><span class=si>{}</span><span class=s2> postlaunch hooks.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
        <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>prelaunch_hooks</span><span class=p>),</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>postlaunch_hooks</span><span class=p>)</span>
    <span class=p>))</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_applications.manager.ApplicationLaunchContext.launch class="doc doc-heading"> <code class="highlight language-python"><span class=n>launch</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Collect data for new process and then create it.</p> <p>This method must not be executed more than once.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>subprocess.Popen: Created process as Popen object.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_applications/manager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>launch</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Collect data for new process and then create it.</span>

<span class=sd>    This method must not be executed more than once.</span>

<span class=sd>    Returns:</span>
<span class=sd>        subprocess.Popen: Created process as Popen object.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>process</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Application was already launched.&quot;</span><span class=p>)</span>
        <span class=k>return</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_prelaunch_hooks_executed</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>run_prelaunch_hooks</span><span class=p>()</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;All prelaunch hook executed. Starting new process.&quot;</span><span class=p>)</span>

    <span class=c1># Prepare subprocess args</span>
    <span class=n>args_len_str</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>
    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>launch_args</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
        <span class=n>args</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>launch_args</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>args</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>clear_launch_args</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>launch_args</span><span class=p>)</span>
        <span class=n>args_len_str</span> <span class=o>=</span> <span class=s2>&quot; (</span><span class=si>{}</span><span class=s2>)&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>args</span><span class=p>))</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span>
        <span class=s2>&quot;Launching </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2> with args</span><span class=si>{}</span><span class=s2>: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>application</span><span class=o>.</span><span class=n>full_name</span><span class=p>,</span> <span class=n>args_len_str</span><span class=p>,</span> <span class=n>args</span>
        <span class=p>)</span>
    <span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>launch_args</span> <span class=o>=</span> <span class=n>args</span>

    <span class=c1># Run process</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>process</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_run_process</span><span class=p>()</span>

    <span class=c1># Process post launch hooks</span>
    <span class=k>for</span> <span class=n>postlaunch_hook</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>postlaunch_hooks</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Executing postlaunch hook: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=nb>str</span><span class=p>(</span><span class=n>postlaunch_hook</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
        <span class=p>))</span>

        <span class=c1># TODO how to handle errors?</span>
        <span class=c1># - store to variable to let them accessible?</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>postlaunch_hook</span><span class=o>.</span><span class=n>execute</span><span class=p>()</span>

        <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=s2>&quot;After launch procedures were not successful.&quot;</span><span class=p>,</span>
                <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
            <span class=p>)</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Launch of </span><span class=si>{}</span><span class=s2> finished.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>application</span><span class=o>.</span><span class=n>full_name</span>
    <span class=p>))</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>process</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_applications.manager.ApplicationLaunchContext.paths_to_launch_hooks class="doc doc-heading"> <code class="highlight language-python"><span class=n>paths_to_launch_hooks</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Directory paths where to look for launch hooks.</p> <details class=quote> <summary>Source code in <code>client/ayon_applications/manager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>paths_to_launch_hooks</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Directory paths where to look for launch hooks.&quot;&quot;&quot;</span>
    <span class=c1># This method has potential to be part of application manager (maybe).</span>
    <span class=n>paths</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=c1># TODO load additional studio paths from settings</span>
    <span class=n>global_hooks_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>AYON_CORE_ROOT</span><span class=p>,</span> <span class=s2>&quot;hooks&quot;</span><span class=p>)</span>

    <span class=n>hooks_dirs</span> <span class=o>=</span> <span class=p>[</span>
        <span class=n>global_hooks_dir</span>
    <span class=p>]</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>host_name</span><span class=p>:</span>
        <span class=c1># If host requires launch hooks and is module then launch hooks</span>
        <span class=c1>#   should be collected using &#39;collect_launch_hook_paths&#39;</span>
        <span class=c1>#   - module have to implement &#39;get_launch_hook_paths&#39;</span>
        <span class=n>host_module</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>addons_manager</span><span class=o>.</span><span class=n>get_host_addon</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>host_name</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>host_module</span><span class=p>:</span>
            <span class=n>hooks_dirs</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
                <span class=n>AYON_CORE_ROOT</span><span class=p>,</span> <span class=s2>&quot;hosts&quot;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>host_name</span><span class=p>,</span> <span class=s2>&quot;hooks&quot;</span>
            <span class=p>))</span>

    <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>hooks_dirs</span><span class=p>:</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
            <span class=ow>and</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isdir</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
            <span class=ow>and</span> <span class=n>path</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>paths</span>
        <span class=p>):</span>
            <span class=n>paths</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

    <span class=c1># Load modules paths</span>
    <span class=n>paths</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_collect_addons_launch_hook_paths</span><span class=p>())</span>

    <span class=k>return</span> <span class=n>paths</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_applications.manager.ApplicationLaunchContext.run_prelaunch_hooks class="doc doc-heading"> <code class="highlight language-python"><span class=n>run_prelaunch_hooks</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Run prelaunch hooks.</p> <p>This method will be executed only once, any future calls will skip the processing.</p> <details class=quote> <summary>Source code in <code>client/ayon_applications/manager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>run_prelaunch_hooks</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Run prelaunch hooks.</span>

<span class=sd>    This method will be executed only once, any future calls will skip</span>
<span class=sd>        the processing.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_prelaunch_hooks_executed</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Prelaunch hooks were already executed.&quot;</span><span class=p>)</span>
        <span class=k>return</span>
    <span class=c1># Discover launch hooks</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>discover_launch_hooks</span><span class=p>()</span>

    <span class=c1># Execute prelaunch hooks</span>
    <span class=k>for</span> <span class=n>prelaunch_hook</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>prelaunch_hooks</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Executing prelaunch hook: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=nb>str</span><span class=p>(</span><span class=n>prelaunch_hook</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
        <span class=p>))</span>
        <span class=n>prelaunch_hook</span><span class=o>.</span><span class=n>execute</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_prelaunch_hooks_executed</span> <span class=o>=</span> <span class=kc>True</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_applications.manager.ApplicationManager class="doc doc-heading"> <code>ApplicationManager</code> </h2> <div class="doc doc-contents "> <p>Load applications and tools and store them by their full name.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>studio_settings</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Preloaded studio settings. When passed manager will always use these values. Gives ability to create manager using different settings.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_applications/manager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ApplicationManager</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Load applications and tools and store them by their full name.</span>

<span class=sd>    Args:</span>
<span class=sd>        studio_settings (dict): Preloaded studio settings. When passed manager</span>
<span class=sd>            will always use these values. Gives ability to create manager</span>
<span class=sd>            using different settings.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>studio_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span> <span class=o>=</span> <span class=n>Logger</span><span class=o>.</span><span class=n>get_logger</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>app_groups</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>applications</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>tool_groups</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>tools</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_studio_settings</span> <span class=o>=</span> <span class=n>studio_settings</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>refresh</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_studio_settings</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>studio_settings</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Ability to change init system settings.</span>

<span class=sd>        This will trigger refresh of manager.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_studio_settings</span> <span class=o>=</span> <span class=n>studio_settings</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>refresh</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Refresh applications from settings.&quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>app_groups</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>applications</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>tool_groups</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>tools</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_studio_settings</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>settings</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_studio_settings</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>settings</span> <span class=o>=</span> <span class=n>get_studio_settings</span><span class=p>(</span>
                <span class=n>clear_metadata</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>exclude_locals</span><span class=o>=</span><span class=kc>False</span>
            <span class=p>)</span>

        <span class=n>applications_addon_settings</span> <span class=o>=</span> <span class=n>settings</span><span class=p>[</span><span class=s2>&quot;applications&quot;</span><span class=p>]</span>

        <span class=c1># Prepare known applications</span>
        <span class=n>app_defs</span> <span class=o>=</span> <span class=n>applications_addon_settings</span><span class=p>[</span><span class=s2>&quot;applications&quot;</span><span class=p>]</span>
        <span class=n>additional_apps</span> <span class=o>=</span> <span class=n>app_defs</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;additional_apps&quot;</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>additional_app</span> <span class=ow>in</span> <span class=n>additional_apps</span><span class=p>:</span>
            <span class=n>app_name</span> <span class=o>=</span> <span class=n>additional_app</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;name&quot;</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>app_name</span> <span class=ow>in</span> <span class=n>app_defs</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>((</span>
                    <span class=s2>&quot;Additional application &#39;</span><span class=si>{}</span><span class=s2>&#39; is already&quot;</span>
                    <span class=s2>&quot; in built-in applications.&quot;</span>
                <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>app_name</span><span class=p>))</span>
            <span class=n>app_defs</span><span class=p>[</span><span class=n>app_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>additional_app</span>

        <span class=k>for</span> <span class=n>group_name</span><span class=p>,</span> <span class=n>variant_defs</span> <span class=ow>in</span> <span class=n>app_defs</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>group</span> <span class=o>=</span> <span class=n>ApplicationGroup</span><span class=p>(</span><span class=n>group_name</span><span class=p>,</span> <span class=n>variant_defs</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>app_groups</span><span class=p>[</span><span class=n>group_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>group</span>
            <span class=k>for</span> <span class=n>app</span> <span class=ow>in</span> <span class=n>group</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>applications</span><span class=p>[</span><span class=n>app</span><span class=o>.</span><span class=n>full_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>app</span>

        <span class=n>tools_definitions</span> <span class=o>=</span> <span class=n>applications_addon_settings</span><span class=p>[</span><span class=s2>&quot;tool_groups&quot;</span><span class=p>]</span>
        <span class=k>for</span> <span class=n>tool_group_data</span> <span class=ow>in</span> <span class=n>tools_definitions</span><span class=p>:</span>
            <span class=n>group</span> <span class=o>=</span> <span class=n>EnvironmentToolGroup</span><span class=p>(</span><span class=n>tool_group_data</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>tool_groups</span><span class=p>[</span><span class=n>group</span><span class=o>.</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>group</span>
            <span class=k>for</span> <span class=n>tool</span> <span class=ow>in</span> <span class=n>group</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>tools</span><span class=p>[</span><span class=n>tool</span><span class=o>.</span><span class=n>full_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>tool</span>

    <span class=k>def</span><span class=w> </span><span class=nf>find_latest_available_variant_for_group</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>group_name</span><span class=p>):</span>
        <span class=n>group</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>app_groups</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>group_name</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>group</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>group</span><span class=o>.</span><span class=n>enabled</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=n>output</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>for</span> <span class=n>_</span><span class=p>,</span> <span class=n>variant</span> <span class=ow>in</span> <span class=nb>reversed</span><span class=p>(</span><span class=nb>sorted</span><span class=p>(</span><span class=n>group</span><span class=o>.</span><span class=n>variants</span><span class=o>.</span><span class=n>items</span><span class=p>())):</span>
            <span class=n>executable</span> <span class=o>=</span> <span class=n>variant</span><span class=o>.</span><span class=n>find_executable</span><span class=p>()</span>
            <span class=k>if</span> <span class=n>executable</span><span class=p>:</span>
                <span class=n>output</span> <span class=o>=</span> <span class=n>variant</span>
                <span class=k>break</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>create_launch_context</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>app_name</span><span class=p>,</span> <span class=o>**</span><span class=n>data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Prepare launch context for application.</span>

<span class=sd>        Args:</span>
<span class=sd>            app_name (str): Name of application that should be launched.</span>
<span class=sd>            **data (Any): Any additional data. Data may be used during</span>

<span class=sd>        Returns:</span>
<span class=sd>            ApplicationLaunchContext: Launch context for application.</span>

<span class=sd>        Raises:</span>
<span class=sd>            ApplicationNotFound: Application was not found by entered name.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>app</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>applications</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>app_name</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>app</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>ApplicationNotFound</span><span class=p>(</span><span class=n>app_name</span><span class=p>)</span>

        <span class=n>executable</span> <span class=o>=</span> <span class=n>app</span><span class=o>.</span><span class=n>find_executable</span><span class=p>()</span>

        <span class=k>return</span> <span class=n>ApplicationLaunchContext</span><span class=p>(</span>
            <span class=n>app</span><span class=p>,</span> <span class=n>executable</span><span class=p>,</span> <span class=o>**</span><span class=n>data</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>launch_with_context</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>launch_context</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Launch application using existing launch context.</span>

<span class=sd>        Args:</span>
<span class=sd>            launch_context (ApplicationLaunchContext): Prepared launch</span>
<span class=sd>                context.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>launch_context</span><span class=o>.</span><span class=n>executable</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>ApplicationExecutableNotFound</span><span class=p>(</span><span class=n>launch_context</span><span class=o>.</span><span class=n>application</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>launch_context</span><span class=o>.</span><span class=n>launch</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>launch</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>app_name</span><span class=p>,</span> <span class=o>**</span><span class=n>data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Launch procedure.</span>

<span class=sd>        For host application it&#39;s expected to contain &quot;project_name&quot;,</span>
<span class=sd>        &quot;folder_path&quot; and &quot;task_name&quot;.</span>

<span class=sd>        Args:</span>
<span class=sd>            app_name (str): Name of application that should be launched.</span>
<span class=sd>            **data (Any): Any additional data. Data may be used during</span>
<span class=sd>                preparation to store objects usable in multiple places.</span>

<span class=sd>        Raises:</span>
<span class=sd>            ApplicationNotFound: Application was not found by entered</span>
<span class=sd>                argument `app_name`.</span>
<span class=sd>            ApplicationExecutableNotFound: Executables in application definition</span>
<span class=sd>                were not found on this machine.</span>
<span class=sd>            ApplicationLaunchFailed: Something important for application launch</span>
<span class=sd>                failed. Exception should contain explanation message,</span>
<span class=sd>                traceback should not be needed.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_launch_context</span><span class=p>(</span><span class=n>app_name</span><span class=p>,</span> <span class=o>**</span><span class=n>data</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>launch_with_context</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_applications.manager.ApplicationManager.create_launch_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>create_launch_context</span><span class=p>(</span><span class=n>app_name</span><span class=p>,</span> <span class=o>**</span><span class=n>data</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Prepare launch context for application.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>app_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of application that should be launched.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>**data</code> </td> <td> <code><span title=Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>Any additional data. Data may be used during</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>ApplicationLaunchContext</code></td> <td> </td> <td> <div class=doc-md-description> <p>Launch context for application.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="ApplicationNotFound (client.ayon_applications.exceptions.ApplicationNotFound)" href=exceptions.html#client.ayon_applications.exceptions.ApplicationNotFound>ApplicationNotFound</a></code> </td> <td> <div class=doc-md-description> <p>Application was not found by entered name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_applications/manager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>create_launch_context</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>app_name</span><span class=p>,</span> <span class=o>**</span><span class=n>data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Prepare launch context for application.</span>

<span class=sd>    Args:</span>
<span class=sd>        app_name (str): Name of application that should be launched.</span>
<span class=sd>        **data (Any): Any additional data. Data may be used during</span>

<span class=sd>    Returns:</span>
<span class=sd>        ApplicationLaunchContext: Launch context for application.</span>

<span class=sd>    Raises:</span>
<span class=sd>        ApplicationNotFound: Application was not found by entered name.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>app</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>applications</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>app_name</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>app</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>ApplicationNotFound</span><span class=p>(</span><span class=n>app_name</span><span class=p>)</span>

    <span class=n>executable</span> <span class=o>=</span> <span class=n>app</span><span class=o>.</span><span class=n>find_executable</span><span class=p>()</span>

    <span class=k>return</span> <span class=n>ApplicationLaunchContext</span><span class=p>(</span>
        <span class=n>app</span><span class=p>,</span> <span class=n>executable</span><span class=p>,</span> <span class=o>**</span><span class=n>data</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_applications.manager.ApplicationManager.launch class="doc doc-heading"> <code class="highlight language-python"><span class=n>launch</span><span class=p>(</span><span class=n>app_name</span><span class=p>,</span> <span class=o>**</span><span class=n>data</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Launch procedure.</p> <p>For host application it's expected to contain "project_name", "folder_path" and "task_name".</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>app_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of application that should be launched.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>**data</code> </td> <td> <code><span title=Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>Any additional data. Data may be used during preparation to store objects usable in multiple places.</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="ApplicationNotFound (client.ayon_applications.exceptions.ApplicationNotFound)" href=exceptions.html#client.ayon_applications.exceptions.ApplicationNotFound>ApplicationNotFound</a></code> </td> <td> <div class=doc-md-description> <p>Application was not found by entered argument <code>app_name</code>.</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="ApplicationExecutableNotFound (client.ayon_applications.exceptions.ApplicationExecutableNotFound)" href=exceptions.html#client.ayon_applications.exceptions.ApplicationExecutableNotFound>ApplicationExecutableNotFound</a></code> </td> <td> <div class=doc-md-description> <p>Executables in application definition were not found on this machine.</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="ApplicationLaunchFailed (client.ayon_applications.exceptions.ApplicationLaunchFailed)" href=exceptions.html#client.ayon_applications.exceptions.ApplicationLaunchFailed>ApplicationLaunchFailed</a></code> </td> <td> <div class=doc-md-description> <p>Something important for application launch failed. Exception should contain explanation message, traceback should not be needed.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_applications/manager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>launch</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>app_name</span><span class=p>,</span> <span class=o>**</span><span class=n>data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Launch procedure.</span>

<span class=sd>    For host application it&#39;s expected to contain &quot;project_name&quot;,</span>
<span class=sd>    &quot;folder_path&quot; and &quot;task_name&quot;.</span>

<span class=sd>    Args:</span>
<span class=sd>        app_name (str): Name of application that should be launched.</span>
<span class=sd>        **data (Any): Any additional data. Data may be used during</span>
<span class=sd>            preparation to store objects usable in multiple places.</span>

<span class=sd>    Raises:</span>
<span class=sd>        ApplicationNotFound: Application was not found by entered</span>
<span class=sd>            argument `app_name`.</span>
<span class=sd>        ApplicationExecutableNotFound: Executables in application definition</span>
<span class=sd>            were not found on this machine.</span>
<span class=sd>        ApplicationLaunchFailed: Something important for application launch</span>
<span class=sd>            failed. Exception should contain explanation message,</span>
<span class=sd>            traceback should not be needed.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_launch_context</span><span class=p>(</span><span class=n>app_name</span><span class=p>,</span> <span class=o>**</span><span class=n>data</span><span class=p>)</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>launch_with_context</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_applications.manager.ApplicationManager.launch_with_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>launch_with_context</span><span class=p>(</span><span class=n>launch_context</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Launch application using existing launch context.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>launch_context</code> </td> <td> <code><a class="autorefs autorefs-internal" title="ApplicationLaunchContext (client.ayon_applications.manager.ApplicationLaunchContext)" href=#client.ayon_applications.manager.ApplicationLaunchContext>ApplicationLaunchContext</a></code> </td> <td> <div class=doc-md-description> <p>Prepared launch context.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_applications/manager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>launch_with_context</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>launch_context</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Launch application using existing launch context.</span>

<span class=sd>    Args:</span>
<span class=sd>        launch_context (ApplicationLaunchContext): Prepared launch</span>
<span class=sd>            context.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>launch_context</span><span class=o>.</span><span class=n>executable</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>ApplicationExecutableNotFound</span><span class=p>(</span><span class=n>launch_context</span><span class=o>.</span><span class=n>application</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>launch_context</span><span class=o>.</span><span class=n>launch</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_applications.manager.ApplicationManager.refresh class="doc doc-heading"> <code class="highlight language-python"><span class=n>refresh</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Refresh applications from settings.</p> <details class=quote> <summary>Source code in <code>client/ayon_applications/manager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span>
<span class=normal>90</span>
<span class=normal>91</span>
<span class=normal>92</span>
<span class=normal>93</span>
<span class=normal>94</span>
<span class=normal>95</span>
<span class=normal>96</span>
<span class=normal>97</span>
<span class=normal>98</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Refresh applications from settings.&quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>app_groups</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>applications</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>tool_groups</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>tools</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>

    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_studio_settings</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>settings</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_studio_settings</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>settings</span> <span class=o>=</span> <span class=n>get_studio_settings</span><span class=p>(</span>
            <span class=n>clear_metadata</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>exclude_locals</span><span class=o>=</span><span class=kc>False</span>
        <span class=p>)</span>

    <span class=n>applications_addon_settings</span> <span class=o>=</span> <span class=n>settings</span><span class=p>[</span><span class=s2>&quot;applications&quot;</span><span class=p>]</span>

    <span class=c1># Prepare known applications</span>
    <span class=n>app_defs</span> <span class=o>=</span> <span class=n>applications_addon_settings</span><span class=p>[</span><span class=s2>&quot;applications&quot;</span><span class=p>]</span>
    <span class=n>additional_apps</span> <span class=o>=</span> <span class=n>app_defs</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;additional_apps&quot;</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>additional_app</span> <span class=ow>in</span> <span class=n>additional_apps</span><span class=p>:</span>
        <span class=n>app_name</span> <span class=o>=</span> <span class=n>additional_app</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;name&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>app_name</span> <span class=ow>in</span> <span class=n>app_defs</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>((</span>
                <span class=s2>&quot;Additional application &#39;</span><span class=si>{}</span><span class=s2>&#39; is already&quot;</span>
                <span class=s2>&quot; in built-in applications.&quot;</span>
            <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>app_name</span><span class=p>))</span>
        <span class=n>app_defs</span><span class=p>[</span><span class=n>app_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>additional_app</span>

    <span class=k>for</span> <span class=n>group_name</span><span class=p>,</span> <span class=n>variant_defs</span> <span class=ow>in</span> <span class=n>app_defs</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=n>group</span> <span class=o>=</span> <span class=n>ApplicationGroup</span><span class=p>(</span><span class=n>group_name</span><span class=p>,</span> <span class=n>variant_defs</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>app_groups</span><span class=p>[</span><span class=n>group_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>group</span>
        <span class=k>for</span> <span class=n>app</span> <span class=ow>in</span> <span class=n>group</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>applications</span><span class=p>[</span><span class=n>app</span><span class=o>.</span><span class=n>full_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>app</span>

    <span class=n>tools_definitions</span> <span class=o>=</span> <span class=n>applications_addon_settings</span><span class=p>[</span><span class=s2>&quot;tool_groups&quot;</span><span class=p>]</span>
    <span class=k>for</span> <span class=n>tool_group_data</span> <span class=ow>in</span> <span class=n>tools_definitions</span><span class=p>:</span>
        <span class=n>group</span> <span class=o>=</span> <span class=n>EnvironmentToolGroup</span><span class=p>(</span><span class=n>tool_group_data</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>tool_groups</span><span class=p>[</span><span class=n>group</span><span class=o>.</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>group</span>
        <span class=k>for</span> <span class=n>tool</span> <span class=ow>in</span> <span class=n>group</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>tools</span><span class=p>[</span><span class=n>tool</span><span class=o>.</span><span class=n>full_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>tool</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_applications.manager.ApplicationManager.set_studio_settings class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_studio_settings</span><span class=p>(</span><span class=n>studio_settings</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Ability to change init system settings.</p> <p>This will trigger refresh of manager.</p> <details class=quote> <summary>Source code in <code>client/ayon_applications/manager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_studio_settings</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>studio_settings</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Ability to change init system settings.</span>

<span class=sd>    This will trigger refresh of manager.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_studio_settings</span> <span class=o>=</span> <span class=n>studio_settings</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>refresh</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.sections", "navigation.path", "navigation.prune"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.c8b220af.min.js></script> </body> </html>